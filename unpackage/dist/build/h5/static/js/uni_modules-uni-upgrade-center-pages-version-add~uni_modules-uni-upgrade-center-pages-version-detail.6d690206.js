(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uni_modules-uni-upgrade-center-pages-version-add~uni_modules-uni-upgrade-center-pages-version-detail"],{"31e0":function(e,t,n){"use strict";n.r(t);var a=n("61c1"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"3e12":function(e,t,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.fields=t.default=void 0;var r=a(n("c7eb")),i=a(n("3835")),o=a(n("1da1")),u=a(n("5530"));n("caad"),n("2532"),n("b64b");var l=n("f3f4");function s(e){var t={};for(var n in l.validator)e.includes(n)&&(t[n]=l.validator[n]);return t}t.fields="appid,name,title,contents,platform,type,version,min_uni_version,url,stable_publish,is_silently,is_mandatory,create_date";var p={data:function(){return{labelWidth:"80px",enableiOSWgt:!0,silentlyContent:"静默更新：App升级时会在后台下载wgt包并自行安装。新功能在下次启动App时生效",mandatoryContent:"强制更新：App升级弹出框不可取消",stablePublishContent:"同时只可有一个线上发行版，线上发行不可更设为下线。\n未上线可以设为上线发行并自动替换当前线上发行版",stablePublishContent2:"使用本包替换当前线上发行版",uploadFileContent:"可下载安装包地址。上传文件到云存储自动填写，也可以手动填写",minUniVersionContent:"上次使用新Api或打包新模块的App版本",priorityContent:"检查更新时，按照优先级从大到小依次尝试跳转商店。如果都跳转失败，则会打开浏览器使用下载链接下载apk安装包",latestStableData:[],appFileList:null,type_valuetotext:l.enumConverter.type_valuetotext,preUrl:"",formData:{appid:"",name:"",title:"",contents:"",platform:[],type:"",version:"",min_uni_version:"",url:"",stable_publish:!1,create_date:null},formOptions:{platform_localdata:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}],type_localdata:[{value:"native_app",text:"原生App安装包"},{value:"wgt",text:"App资源包"}]},rules:(0,u.default)({},s(["appid","contents","platform","type","version","min_uni_version","url","stable_publish","title","name","is_silently","is_mandatory"]))}},onReady:function(){this.$refs.form.setRules(this.rules)},computed:{isWGT:function(){return"wgt"===this.formData.type},isiOS:function(){return!this.isWGT&&this.formData.platform.includes("iOS")},hasPackage:function(){return this.appFileList&&!!Object.keys(this.appFileList).length},fileExtname:function(){return this.isWGT?["wgt"]:["apk"]},platformLocaldata:function(){return this.isWGT?this.enableiOSWgt?this.formOptions.platform_localdata:[this.formOptions.platform_localdata[0]]:this.formOptions.platform_localdata},uni_platform:function(){return(this.isiOS?"iOS":"Android").toLocaleLowerCase()}},methods:{packageUploadSuccess:function(e){uni.showToast({icon:"success",title:"上传成功",duration:800}),this.preUrl=this.formData.url,this.formData.url=e.tempFilePaths[0]},deleteFile:function(e){return this.$request("deleteFile",{fileList:e},{functionName:"uni-upgrade-center"})},packageDelete:function(e){var t=this;return(0,o.default)((0,r.default)().mark((function n(){var a,o,u;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasPackage){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.deleteFile([e.tempFilePath]);case 4:a=n.sent,o=(0,i.default)(a,1),u=o[0],u.success&&(uni.showToast({icon:"success",title:"删除成功",duration:800}),t.formData.url=t.preUrl,t.$refs.form.clearValidate("url"));case 8:case"end":return n.stop()}}),n)})))()},selectFile:function(){this.hasPackage&&uni.showToast({icon:"none",title:"只可上传一个文件，请删除已上传后重试",duration:1e3})},createCenterRecord:function(e){return(0,u.default)((0,u.default)({},e),{},{uni_platform:this.uni_platform,create_env:"upgrade-center"})},createCenterQuery:function(e){var t=e.appid;return{appid:t,create_env:"upgrade-center"}},createStatQuery:function(e){var t=e.appid,n=e.type,a=e.version,r=e.uni_platform;return{appid:t,type:n,version:a,uni_platform:r||this.uni_platform,create_env:"uni-stat",stable_publish:!1}}}};t.default=p},"5d09":function(e,t,n){"use strict";n.r(t);var a=n("d9c7"),r=n("bed3");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("8f84");var o=n("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"69185602",null,!1,a["a"],void 0);t["default"]=u.exports},"61c1":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var a={props:{content:String,top:{type:[Number,String],default:-60},left:{type:[Number,String],default:-100},width:{type:[Number,String],default:200}},data:function(){return{showStableInfo:!1,arrowStyle:{}}},methods:{mouseenter:function(e){this.showStableInfo=!0}}};t.default=a},"71ef":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var a={props:{content:String,top:{type:[Number,String],default:-60},left:{type:[Number,String],default:-100},width:{type:[Number,String],default:200}},data:function(){return{showStableInfo:!1,arrowStyle:{}}},methods:{mouseenter:function(e){this.showStableInfo=!0}}};t.default=a},"7d0b":function(e,t,n){"use strict";var a=n("9989"),r=n.n(a);r.a},"84d9":function(e,t,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.appVersionListDbName=t.appListDbName=void 0,t.deepClone=function e(t){if([null,void 0,NaN,!1].includes(t))return t;if("object"!==(0,r.default)(t)&&"function"!==typeof t)return t;var n=function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t)?[]:{};for(var a in t)t.hasOwnProperty(a)&&(n[a]="object"===(0,r.default)(t[a])?e(t[a]):t[a]);return n},t.defaultDisplayApp=void 0;var r=a(n("53ca"));n("d3b7"),n("caad");t.appListDbName="opendb-app-list";t.appVersionListDbName="opendb-app-versions";t.defaultDisplayApp=""},"8f84":function(e,t,n){"use strict";var a=n("f5f7"),r=n.n(a);r.a},9989:function(e,t,n){var a=n("fc71");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("4f06").default;r("ff47b0e0",a,!0,{sourceMap:!1,shadowMode:!1})},"9cf2":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 水平间距 */\n/* 水平间距 */\n/* 行为相关颜色 */\n/* 兼容 uni-ui 相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.show-stable[data-v-69185602]{position:absolute;padding:5px 10px;background-color:#303133;color:#fff;border-radius:4px;border:1px solid #e9e9eb;z-index:99999}',""]),e.exports=t},bed3:function(e,t,n){"use strict";n.r(t);var a=n("71ef"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},d9c7:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("1dfb").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{position:"relative"}},[n("uni-icons",{staticStyle:{padding:"0 10px",color:"#a8a8a8",cursor:"pointer"},attrs:{type:"info"},nativeOn:{mouseenter:function(t){arguments[0]=t=e.$handleEvent(t),e.mouseenter.apply(void 0,arguments)},mouseleave:function(t){arguments[0]=t=e.$handleEvent(t),e.showStableInfo=!1}}}),e.showStableInfo?n("v-uni-view",{staticClass:"show-stable",style:{top:e.top+"px",left:e.left+"px",width:e.width+"px"}},[n("v-uni-text",[e._v(e._s(e.content))])],1):e._e()],1)},i=[]},e2ea:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("1dfb").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{position:"relative"}},[n("uni-icons",{staticStyle:{padding:"0 10px",color:"#a8a8a8",cursor:"pointer"},attrs:{type:"info"},nativeOn:{mouseenter:function(t){arguments[0]=t=e.$handleEvent(t),e.mouseenter.apply(void 0,arguments)},mouseleave:function(t){arguments[0]=t=e.$handleEvent(t),e.showStableInfo=!1}}}),e.showStableInfo?n("v-uni-view",{staticClass:"show-stable",style:{top:e.top+"px",left:e.left+"px",width:e.width+"px"}},[n("v-uni-text",[e._v(e._s(e.content))])],1):e._e()],1)},i=[]},eb7d:function(e,t,n){"use strict";n.r(t);var a=n("e2ea"),r=n("31e0");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("7d0b");var o=n("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"5cb9e4c1",null,!1,a["a"],void 0);t["default"]=u.exports},f3f4:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.validator=t.enumConverter=void 0;t.validator={appid:{rules:[{required:!0},{format:"string"}],label:"AppID"},name:{rules:[{format:"string"}],label:"应用名称"},title:{rules:[{format:"string"}],label:"更新标题"},contents:{rules:[{required:!0},{format:"string"}],label:"更新内容"},platform:{rules:[{required:!0},{range:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}]}],label:"平台"},type:{rules:[{required:!0},{format:"string"},{range:[{value:"native_app",text:"原生App安装包"},{value:"wgt",text:"wgt资源包"}]}],label:"安装包类型"},version:{rules:[{required:!0},{format:"string"}],label:"版本号"},min_uni_version:{rules:[{format:"string"}],label:"原生App最低版本"},url:{rules:[{required:!0},{format:"string"}],label:"包地址"},stable_publish:{rules:[{format:"bool"}],label:"上线发行"},create_date:{rules:[{format:"timestamp"}],label:"上传时间"},is_silently:{rules:[{format:"bool"}],label:"静默更新",defaultValue:!1},is_mandatory:{rules:[{format:"bool"}],label:"强制更新",defaultValue:!1}};t.enumConverter={platform_valuetotext:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}],type_valuetotext:{native_app:"原生App安装包",wgt:"wgt资源包"}}},f5f7:function(e,t,n){var a=n("9cf2");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("4f06").default;r("639d0c64",a,!0,{sourceMap:!1,shadowMode:!1})},fc71:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 水平间距 */\n/* 水平间距 */\n/* 行为相关颜色 */\n/* 兼容 uni-ui 相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.show-stable[data-v-5cb9e4c1]{width:200px;position:absolute;padding:5px 10px;background-color:#303133;color:#fff;border-radius:4px;border:1px solid #e9e9eb;z-index:99999}',""]),e.exports=t}}]);